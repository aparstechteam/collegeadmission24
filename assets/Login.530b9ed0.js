import{r as i,s as x,j as g,k as y,l as e,H as w,y as c,I as u,D as k}from"./index.ee6a2234.js";import{a as N,l as S}from"./api.6d59bfa2.js";const B={class:"container py-20 mx-auto"},C={class:"max-w-md p-5 mx-auto border rounded-2xl"},D=["onSubmit"],U=e("h2",{class:"text-lg font-medium text-center"},"Login With Credentials",-1),V={class:""},z={class:"form-control"},A=e("label",{class:"label"},[e("span",{class:"label-text"},"Phone Number")],-1),E={class:"form-control"},I=e("label",{class:"label"},[e("span",{class:"label-text"},"Email")],-1),L={class:"mt-3 text-center"},j={setup(M){const a=i(""),o=i(""),r=x(),n=i(!1),d=async()=>{n.value=!0;let l=a.value.substr(a.value.length-10);if((await N("+880"+l,o.value)).exists){let s=await S(l);s.user||r.push("/register?phone="+l);let p=s.user,[m,h,_,v,b]=p,f={phone:m,roll:h,name:_,email:v,school:b};localStorage.setItem("ca24",JSON.stringify(f)),r.push("/")}else alert("You are not authorized to access this page"),n.value=!1};return(l,t)=>(g(),y("div",B,[e("div",C,[e("form",{class:"space-y-2",onSubmit:w(d,["prevent"])},[U,e("div",V,[e("div",z,[A,c(e("input",{type:"tel",class:"input input-bordered",placeholder:"Your Phone Number",id:"phone","onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s)},null,512),[[u,a.value]])]),e("div",E,[I,c(e("input",{type:"email",class:"input input-bordered",placeholder:"e.g. example@example.com",id:"phone","onUpdate:modelValue":t[1]||(t[1]=s=>o.value=s)},null,512),[[u,o.value]])]),e("div",L,[e("button",{class:k(["btn",{loading:n.value}])},"Login",2)])])],40,D)])]))}};export{j as default};
